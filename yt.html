<html>
  <head>
    <script src='https://cdn.firebase.com/v0/firebase.js'></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" ></script>
    <script src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js" ></script>
    <script>
      var dataRef = new Firebase("https://sudarshan.firebaseio.com/");
      var ytplayer = null;

      dataRef.on('value', function(data){
        console.log(data);
        playing = data.val();
        playPause(playing);
      });
      
      function doClick() {
        //playing = !playing;
        //dataRef.set(playing, function(result){
        //  playPause();
        //});
        playPause(ytplayer.getPlayerState() != 1)
      }

      function playPause(play){
        if(play){
          ytplayer.playVideo();
        }
        else {
          ytplayer.pauseVideo();
        }
      }
      window.onload = function(){
        var params = { allowScriptAccess: "always" };
        var atts = { id: "myytplayer" };
        swfobject.embedSWF("http://www.youtube.com/apiplayer?video_id=hT_nvWreIhg&version=3&enablejsapi=1&playerapiid=ytplayer&version=3", "ytapiplayer", "425", "356", "8", null, null, params, atts);            
      }
      function onYouTubePlayerReady(playerId) {
        ytplayer = $("#myytplayer")[0];

        ytplayer.addEventListener("onStateChange", "stateListener"); 
          
        playPause();
      }
      function stateListener (value){
        switch (value)
        {
          case -1:
            console.log("unstarted");
            break;
          case 0:
            console.log("ended");
            break;
          case 1:
            console.log("playing");
            break;
          case 2:
            console.log("paused");
            break;
          case 3:
            console.log("buffering");
            break;
          case 5:
            console.log("cued");
            break;
        }
      };
    </script>
  </head>
  <body>
  <button onclick="doClick()" >Play/Pause</button>
  <div id="ytapiplayer">
     You need Flash player 8+ and JavaScript enabled to view this video.
   </div>
  </body>
</html>